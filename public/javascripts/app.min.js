window.tfFrames={loadFrames:function(){var e=document.getElementById("css"),t=e.value,a=t.split("\n"),n=a[0].split("|")[0];document.getElementById("frameCount").value=a.length,document.getElementById("frameClass").value="unknown",document.getElementById("frameName").value=n,this.generateFrames();for(var r=0;r<a.length;r++){var m=a[r].split("|");if(m.length>=3){var d=this.getFrame(m[1],m[0]);d.setAttribute("style",m[2])}}},generateFrames:function(){var e=(document.getElementsByTagName("body")[0],document.getElementById("css"),document.getElementsByClassName("frames")[0]),t=document.getElementById("frameCount").value,a=document.getElementById("frameClass").value,n=document.getElementById("frameName").value,r=document.getElementsByTagName("select")[0];r.dataset.frameName=n,document.getElementById("frameName2").value=n;for(var m=0,d=e.childElementCount;t>m;){var l=document.createElement("span");l.dataset.frameCount=d+1,l.dataset.frameLength=1,l.setAttribute("class","opacity frame "+n+(d+1)+" "+a),l.setAttribute("style",""),e.appendChild(l);var s=document.createElement("option");s.setAttribute("value",d+1),s.innerHTML=n+(d+1),r.appendChild(s),m++,d++}},getFrame:function(e,t){for(var a=void 0,n=document.querySelectorAll('[data-frame-count="'+e+'"]'),r=0;r<n.length;){var m=n[r].className.split(" ");if(n[r].dataset.frameCount==e&&m.indexOf(t+e)>=0){a=n[r];break}}return a},_keyFrames:function(e){for(var t=0,a=1,n=document.getElementById("frameCount").value,r=document.getElementById("frameName").value,m=r,d=0,l="@keyframes "+m+"_"+d+" {\n",s=m+"_"+d+" 1s steps(24) 1 "+d+"s normal, ",i=0,u=1,o="/* Frame Data: \n";n>t;){this.getFrame(a,r);a%25==0&&(s+=m+"_"+d+" 1s steps(24) 1 "+d+"s normal, ",d++,u=1,i=0,l+="}\n\n",l+="@keyframes "+m+"_"+d+" {\n");var c=4.16*u;c>99&&(c=100),l+="  "+i+"%,"+c+"% {",e&&(l+="    /* frame "+(t+1)+" rules here */");var p=this.getStyle(a,r);void 0!=p&&(l+=p,o+=r+"|"+a+"|"+p+"\n"),l+="}\n",i=c,u++,a++,t++}return a%25!=0&&(l+="}\n\n"),{animations:s.substr(0,s.length-2),keyframes:l,frameData:o}},generateKeyframes:function(){var e=this._keyFrames(!0),t=document.getElementById("css"),a=document.getElementById("frameName").value;t.value="",t.value=t.value+"."+a+".animate {\n",t.value=t.value+"  animation: "+e.animations+";\n",t.value=t.value+"  animation-fill-mode: forwards;\n}\n\n",t.value=t.value+e.keyframes,t.value=t.value+e.frameData+"*/\n"},getStyle:function(e,t){var a=this.getFrame(e,t);return a.getAttribute("style")},selectFrame:function(){var e=document.getElementsByTagName("select")[0],t=this.getFrame(e.value,e.dataset.frameName),a=t.getAttribute("style"),n=document.getElementById("frameStyle");n.value=a,console.log(t)},setFrameStyle:function(){var e=document.getElementsByTagName("select")[0],t=this.getFrame(e.value,e.dataset.frameName),a=(t.getAttribute("style"),document.getElementById("frameStyle"));t.setAttribute("style",a.value),console.log(t)},toggle:function(){var e=document.getElementById("tbtn"),t=document.getElementsByTagName("form")[0],a=document.getElementsByTagName("textarea")[0],n=document.getElementsByTagName("body")[0],r=document.getElementsByClassName("frames")[0];"display:none;"===t.getAttribute("style")?(t.setAttribute("style",""),a.setAttribute("style",""),r.setAttribute("style",""),n.className+="grid",e.innerHTML="Hide >"):(t.setAttribute("style","display:none;"),a.setAttribute("style","display:none;"),r.setAttribute("style","display:none;"),n.className=n.className.replace(/(?:^|\s)grid(?!\S)/g,""),e.innerHTML="Show >")},test:function(){var e=document.getElementById("frameName").value,t=document.getElementById(e+"Test");void 0!=t&&t.parentNode.removeChild(t);var a=document.getElementById("animationtest");void 0!=a&&a.parentNode.removeChild(a);var n=document.getElementById("frameClass").value,r=(this.getFrame(1,e),document.createElement("span"));r.setAttribute("id",e+"Test");var m=document.getElementsByTagName("body")[0];m.appendChild(r);var d=document.createElement("style");d.setAttribute("id","animationtest"),d.appendChild(document.createTextNode("")),m.appendChild(d);var l=this._keyFrames(!1);d.sheet.insertRule(l.keyframes,0),d.sheet.insertRule("."+e+".animate {animation: "+l.animations+";animation-fill-mode: forwards;}",1),console.log(d.sheet.cssRules),r.className=n+" "+e+" animate";var s=document.getElementsByTagName("form")[0];"display:none;"===s.getAttribute("style")||this.toggle()},init:function(){var e=document.getElementsByTagName("body")[0],t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("id","tbtn"),t.setAttribute("onclick","window.tfFrames.toggle();"),t.appendChild(document.createTextNode("Hide >")),e.appendChild(t);var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("id","tbtn"),a.setAttribute("onclick","window.tfFrames.test();"),a.appendChild(document.createTextNode("Test >")),e.appendChild(a);var n=document.createElement("form"),r=document.createElement("ol"),m=document.createElement("li");r.appendChild(m);var d=document.createElement("p");d.appendChild(document.createTextNode("Paste previously generated frame data into textarea below and "));var l=document.createElement("button");l.setAttribute("type","button"),l.setAttribute("onclick","window.tfFrames.loadFrames();"),l.appendChild(document.createTextNode("Load")),d.appendChild(l),m.appendChild(d);var s=document.createElement("li");r.appendChild(s);var i=document.createElement("p"),u=document.createElement("label");u.appendChild(document.createTextNode("If frames not loaded in step 1, generate: ")),i.appendChild(u);var o=document.createElement("input");o.setAttribute("type","number"),o.setAttribute("name","genFrames"),o.setAttribute("value","50"),o.setAttribute("id","frameCount"),i.appendChild(o),i.appendChild(document.createTextNode(" frames with class "));var c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("value",""),c.setAttribute("id","frameClass"),i.appendChild(c),i.appendChild(document.createTextNode(" with name "));var p=document.createElement("input");p.setAttribute("type","text"),p.setAttribute("value",""),p.setAttribute("id","frameName"),i.appendChild(p);var y=document.createElement("button");y.setAttribute("type","button"),y.setAttribute("onclick","window.tfFrames.generateFrames();"),y.appendChild(document.createTextNode("Go >")),i.appendChild(y),s.appendChild(i);var v=document.createElement("li");r.appendChild(v);var g=document.createElement("p");g.appendChild(document.createTextNode("Select "));var f=document.createElement("select");f.setAttribute("name","frame"),f.setAttribute("onchange","window.tfFrames.selectFrame();"),g.appendChild(f),g.appendChild(document.createTextNode(" frame and set style to "));var b=document.createElement("input");b.setAttribute("type","text"),b.setAttribute("value",""),b.setAttribute("id","frameStyle"),b.setAttribute("style","width:500px;"),b.setAttribute("onchange","window.tfFrames.setFrameStyle();"),g.appendChild(b),v.appendChild(g);var h=document.createElement("li");r.appendChild(h);var E=document.createElement("p");E.appendChild(document.createTextNode("Use "));var C=document.createElement("input");C.setAttribute("type","text"),C.setAttribute("value",""),C.setAttribute("id","frameName2"),E.appendChild(C),E.appendChild(document.createTextNode(" frames and "));var A=document.createElement("button");A.setAttribute("type","button"),A.setAttribute("onclick","window.tfFrames.generateKeyframes();"),A.appendChild(document.createTextNode("Generate Keyframes >")),E.appendChild(A),h.appendChild(E),n.appendChild(r),e.appendChild(n);var N=document.createElement("textarea");N.setAttribute("rows","10"),N.setAttribute("cols","100"),N.setAttribute("id","css"),e.appendChild(N);var B=document.createElement("div");B.setAttribute("class","frames"),e.appendChild(B),this.toggle()}};