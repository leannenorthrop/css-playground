window.tfFrames={loadFrames:function(){var e=this.output,t=e.value,a=t.split("\n"),n=a[0].split("|")[1],r=a[0].split("|")[0];this.frameCount.value=a.length,this.frameClass.value=r,this.frameName.value=n,this.generateFrames();for(var i=0;i<a.length;i++){var s=a[i].split("|");if(s.length>=3){var l=this.getFrame(s[2],s[1]);l.setAttribute("style",s[3])}}},generateFrames:function(){var e=(this.body,this.output,this.framesDiv),t=this.frameCount.value,a=this.frameClass.value,n=this.frameName.value,r=this.selectFrame;r.dataset.frameName=n,this.frameName2.value=n;for(var i=0,s=e.childElementCount;t>i;){var l=document.createElement("span");l.dataset.frameCount=s+1,l.dataset.frameLength=1,l.setAttribute("class","opacity frame "+n+(s+1)+" "+a),l.setAttribute("style",""),e.appendChild(l);var m=document.createElement("option");m.setAttribute("value",s+1),m.innerHTML=n+(s+1),r.appendChild(m),i++,s++}},getFrame:function(e,t){for(var a=void 0,n=document.querySelectorAll('[data-frame-count="'+e+'"]'),r=0;r<n.length;){var i=n[r].className.split(" ");if(n[r].dataset.frameCount==e&&i.indexOf(t+e)>=0){a=n[r];break}}return a},_keyFrames:function(e){for(var t=0,a=1,n=this.frameCount.value,r=this.frameName.value,i=this.frameClass.value,s=r,l=0,m="@keyframes "+s+"_"+l+" {\n",d=s+"_"+l+" 1s steps(24) 1 "+l+"s normal, ",u=0,o=1,c="/* Frame Data: \n";n>t;){this.getFrame(a,r);a%25==0&&(d+=s+"_"+l+" 1s steps(24) 1 "+l+"s normal, ",l++,o=1,u=0,m+="}\n\n",m+="@keyframes "+s+"_"+l+" {\n");var p=4.16*o;p>99&&(p=100),m+="  "+u+"%,"+p+"% {",e&&(m+="    /* frame "+(t+1)+" rules here */");var h=this.getStyle(a,r);void 0!=h&&(m+=h,c+=i+"|"+r+"|"+a+"|"+h+"\n"),m+="}\n",u=p,o++,a++,t++}return a%25!=0&&(m+="}\n\n"),{animations:d.substr(0,d.length-2),keyframes:m,frameData:c}},generateKeyframes:function(){var e=this._keyFrames(!0),t=this.output,a=this.frameName.value;t.value="",t.value=t.value+"."+a+".animate {\n",t.value=t.value+"  animation: "+e.animations+";\n",t.value=t.value+"  animation-fill-mode: forwards;\n}\n\n",t.value=t.value+e.keyframes,t.value=t.value+e.frameData+"*/\n"},getStyle:function(e,t){var a=this.getFrame(e,t);return a.getAttribute("style")},changeSelectFrame:function(){var e=this.selectFrame,t=this.getFrame(e.value,e.dataset.frameName),a=t.getAttribute("style"),n=this.frameStyle;n.value=a,console.log(t)},setFrameStyle:function(){var e=this.selectFrame,t=this.getFrame(e.value,e.dataset.frameName),a=(t.getAttribute("style"),this.frameStyle);t.setAttribute("style",a.value),console.log(t)},toggle:function(){var e=this.toggleBtn,t=this.form,a=this.output,n=this.body,r=this.framesDiv;"display:none;"===t.getAttribute("style")?(this.clearTest(),t.setAttribute("style",""),a.setAttribute("style",""),r.setAttribute("style",""),n.className+="grid",e.innerHTML="Hide >"):(t.setAttribute("style","display:none;"),a.setAttribute("style","display:none;"),r.setAttribute("style","display:none;"),n.className=n.className.replace(/(?:^|\s)grid(?!\S)/g,""),e.innerHTML="Show >")},clearTest:function(){var e=this.frameName.value,t=document.getElementById(e+"Test");void 0!=t&&t.parentNode.removeChild(t);var a=document.getElementById("animationtest");void 0!=a&&a.parentNode.removeChild(a)},test:function(){this.clearTest();var e=this.frameName.value,t=this.frameClass.value,a=(this.getFrame(1,e),document.createElement("span"));a.setAttribute("id",e+"Test");var n=this.body;n.appendChild(a);var r=document.createElement("style");r.setAttribute("id","animationtest"),r.appendChild(document.createTextNode("")),n.appendChild(r);var i=this._keyFrames(!1);r.sheet.insertRule(i.keyframes,0),r.sheet.insertRule("."+e+".animate {animation: "+i.animations+";animation-fill-mode: forwards;}",1),console.log(r.sheet.cssRules),a.className=t+" "+e+" animate";var s=document.getElementsByTagName("form")[0];"display:none;"===s.getAttribute("style")||this.toggle()},init:function(){var e=document.getElementsByTagName("body")[0];this.body=e;var t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("id","tbtn"),t.setAttribute("onclick","window.tfFrames.toggle();"),t.appendChild(document.createTextNode("Hide >")),this.toggleBtn=t,e.appendChild(t);var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("id","tbtn"),a.setAttribute("onclick","window.tfFrames.test();"),a.appendChild(document.createTextNode("Test >")),this.testBtn=a,e.appendChild(a);var n=document.createElement("form");this.form=n;var r=document.createElement("ol"),i=document.createElement("li");r.appendChild(i);var s=document.createElement("p");s.appendChild(document.createTextNode("Paste previously generated frame data into textarea below and "));var l=document.createElement("button");l.setAttribute("type","button"),l.setAttribute("onclick","window.tfFrames.loadFrames();"),l.appendChild(document.createTextNode("Load")),this.loadBtn=l,s.appendChild(l),i.appendChild(s);var m=document.createElement("li");r.appendChild(m);var d=document.createElement("p"),u=document.createElement("label");u.appendChild(document.createTextNode("If frames not loaded in step 1, generate: ")),d.appendChild(u);var o=document.createElement("input");o.setAttribute("type","number"),o.setAttribute("name","genFrames"),o.setAttribute("value","50"),o.setAttribute("id","frameCount"),this.frameCount=o,d.appendChild(o),d.appendChild(document.createTextNode(" frames with class "));var c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("value",""),c.setAttribute("id","frameClass"),this.frameClass=c,d.appendChild(c),d.appendChild(document.createTextNode(" with name "));var p=document.createElement("input");p.setAttribute("type","text"),p.setAttribute("value",""),p.setAttribute("id","frameName"),this.frameName=p,d.appendChild(p);var h=document.createElement("button");h.setAttribute("type","button"),h.setAttribute("onclick","window.tfFrames.generateFrames();"),h.appendChild(document.createTextNode("Go >")),this.goBtn=h,d.appendChild(h),m.appendChild(d);var v=document.createElement("li");r.appendChild(v);var f=document.createElement("p");f.appendChild(document.createTextNode("Select "));var b=document.createElement("select");b.setAttribute("name","frame"),b.setAttribute("onchange","window.tfFrames.changeSelectFrame();"),this.selectFrame=b,f.appendChild(b),f.appendChild(document.createTextNode(" frame and set style to "));var y=document.createElement("input");y.setAttribute("type","text"),y.setAttribute("value",""),y.setAttribute("id","frameStyle"),y.setAttribute("style","width:500px;"),y.setAttribute("onchange","window.tfFrames.setFrameStyle();"),this.frameStyle=y,f.appendChild(y),v.appendChild(f);var g=document.createElement("li");r.appendChild(g);var C=document.createElement("p");C.appendChild(document.createTextNode("Use "));var A=document.createElement("input");A.setAttribute("type","text"),A.setAttribute("value",""),A.setAttribute("id","frameName2"),this.frameName2=A,C.appendChild(A),C.appendChild(document.createTextNode(" frames and "));var N=document.createElement("button");N.setAttribute("type","button"),N.setAttribute("onclick","window.tfFrames.generateKeyframes();"),N.appendChild(document.createTextNode("Generate Keyframes >")),this.genBtn=N,C.appendChild(N),g.appendChild(C),n.appendChild(r),e.appendChild(n);var E=document.createElement("textarea");E.setAttribute("rows","10"),E.setAttribute("cols","100"),E.setAttribute("id","css"),this.output=E,e.appendChild(E);var F=document.createElement("div");F.setAttribute("class","frames"),this.framesDiv=F,e.appendChild(F),this.toggle()}};